local gui = Instance.new("ScreenGui")
local button = Instance.new("TextButton")
local delete = Instance.new("TextButton")
local returns = Instance.new("TextButton")
local killall = Instance.new("TextButton")
local players = game.Players
local saved = false
local cha
local pos
local pos2
local returnpos
local ur = game:GetService("UserInputService")
gui.Parent = players.LocalPlayer.PlayerGui
killall.Parent = gui
delete.Parent = gui
button.Parent = gui
returns.Parent = gui
button.Size = UDim2.new(0.2,0,0.2,0)
killall.Size = UDim2.new(0.2,0,0.2,0)
button.Position = UDim2.new(0.8,0,0.4,0)
button.BackgroundColor = BrickColor.Red()
delete.Position = button.Position + UDim2.new(0,0,0.2,0)
returns.Position = delete.Position + UDim2.new(0,0,0.2,0)
killall.Position = returns.Position + UDim2.new(-0.8,0,0,0)
killall.BackgroundColor = BrickColor.Blue()
killall.TextScaled = true
killall.Text = "Kill all"
returns.TextScaled = true
returns.Text = "Wait for position"
returns.Size = UDim2.new(0.2,0,0.2,0)
delete.TextScaled = true
delete.Text = "Click to delete position"
delete.Size = UDim2.new(0.2,0,0.2,0)
delete.BackgroundColor = BrickColor.Yellow()
button.Text = "Click to save"
button.TextScaled = true
gui.ResetOnSpawn = false
button.BackgroundTransparency = 0
returns.BackgroundColor = BrickColor.Green()
ur.InputBegan:Connect(function(key)
	if key.KeyCode == Enum.KeyCode.P and saved == false then
		local locplr = players.LocalPlayer
		cha = locplr.Character
		pos = cha:FindFirstChild("HumanoidRootPart")
		pos2 = pos.Position
		button.Text = "Click to teleport"
		saved = true
	end
	if key.KeyCode == Enum.KeyCode.P and saved == true then
		local hum = cha:FindFirstChild("HumanoidRootPart")
		local position = hum.Position
		returnpos = position
		cha:MoveTo(pos2)
		returns.Text = "Return"
	end

	if key.KeyCode == Enum.KeyCode.L then
		if saved == true then	
			saved = false
			pos2 = nil
			delete.Text = "Succes delete position"
			button.Text = "Click to save"
			returns.Text = "Wait for position"
			task.wait(2)
			delete.Text = "Click to delete Position"
		end	
	end
	if key.KeyCode == Enum.KeyCode.K then
		if saved == true then
			cha:MoveTo(returnpos)
			returns.Text = "Wait for position"
			returnpos = nil
		end
	end
end)
button.MouseButton1Click:Connect(function()
	if saved == false then
		local locplr = players.LocalPlayer
		cha = locplr.Character
		pos = cha:FindFirstChild("HumanoidRootPart")
		pos2 = pos.Position
		button.Text = "Click to teleport"
		saved = true
	else
		local hum = cha:FindFirstChild("HumanoidRootPart")
		local position = hum.Position
		returnpos = position
		cha:MoveTo(pos2)
		returns.Text = "Return"
	end	
end)

delete.MouseButton1Click:Connect(function()
	if saved == true then	
		saved = false
		pos2 = nil
		delete.Text = "Succes delete position"
		button.Text = "Click to save"
		returns.Text = "Wait for position"
		task.wait(2)
		delete.Text = "Click to delete Position"
	end	
end)

returns.MouseButton1Click:Connect(function()
	if saved == true then
		cha:MoveTo(returnpos)
		returns.Text = "Wait for position"
		returnpos = nil
	end
end)

killall.MouseButton1Click:Connect(function(plr)
	local plrname = players.LocalPlayer
	local cha = players.LocalPlayer.Character
	local hum = cha:FindFirstChild("HumanoidRootPart")
	local all = players:GetPlayers()
	local part = cha:GetChildren()
	local posbefore = hum.Position

	for _, pon in all do
		if pon.Name == plrname.Name then
		else
			local cha2 = pon.Character
			local torso = cha2:FindFirstChild("Torso")
			local hum2 = cha2:FindFirstChild("HumanoidRootPart")
			local times = 0
			while times ~= 5 do
				hum.CFrame = hum2.CFrame
				times += 1
				task.wait(0.3)
			end
			task.wait(0.5)
			cha:MoveTo(posbefore)
		end	
	end
end)
